(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{291:function(t,a,s){"use strict";s.r(a);var n=s(14),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"开始使用-canary-library"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始使用-canary-library"}},[t._v("#")]),t._v(" 开始使用 Canary Library")]),t._v(" "),a("p",[t._v("欢迎来到"),a("strong",[t._v("更简单的")]),t._v("Canary模型对抗鲁棒性评估框架学习教程！")]),t._v(" "),a("p",[t._v("在本章节中，我们将使用 "),a("code",[t._v("Canary")]),t._v("、"),a("code",[t._v("Canary Library")]),t._v("和 "),a("code",[t._v("PyTorch")]),t._v(" 构建一个简单的模型鲁棒性测试任务。我们在"),a("code",[t._v("Canary Library")]),t._v("提供了大量攻击方法和预训练模型，并确保它们可用，这将极大简化研究人员的工作量，研究人员再也不用四处寻找或者复现经典的代码了（Really？）。")]),t._v(" "),a("p",[t._v("让我们开始吧！")]),t._v(" "),a("h2",{attrs:{id:"第0步-准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第0步-准备"}},[t._v("#")]),t._v(" 第0步：准备")]),t._v(" "),a("p",[t._v("在开始编写任何实际代码之前，让我们确保我们已经做好了一切必要的准备。")]),t._v(" "),a("h3",{attrs:{id:"安装依赖项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖项"}},[t._v("#")]),t._v(" 安装依赖项")]),t._v(" "),a("p",[t._v("我们安装 "),a("code",[t._v("PyTorch")]),t._v(" (和"),a("code",[t._v("Torchvision")]),t._v(") 和 "),a("code",[t._v("Canary")]),t._v(" 所需的软件包：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" torch torchvision torchaudio\npip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" requirement.txt\n")])])]),a("p",[t._v("* 为确保"),a("code",[t._v("Canary Library")]),t._v("项目可用，我们推荐"),a("code",[t._v("PyTorch")]),t._v("的版本应至少 ≥ 2.0.0")]),t._v(" "),a("h3",{attrs:{id:"准备数据集与模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备数据集与模型"}},[t._v("#")]),t._v(" 准备数据集与模型")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("Canary Library")]),t._v("，如果你只是想评估一下你的攻击方法是否有效，或者只是单纯想体验一下对抗攻击过程，你就无需准备任何数据集与模型。")]),t._v(" "),a("h3",{attrs:{id:"准备对抗攻击-adversarial-attack-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备对抗攻击-adversarial-attack-方法"}},[t._v("#")]),t._v(" 准备对抗攻击(Adversarial Attack)方法")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("Canary Library")]),t._v("，如果你只是想评估一下你的模型是否足够对抗鲁棒，或者只是单纯想体验一下对抗攻击过程，你就无需准备任何对抗攻击方法。")]),t._v(" "),a("p",[a("strong",[t._v("好了，我们的准备工作就是这么轻松愉快（且高效）~")])]),t._v(" "),a("h2",{attrs:{id:"第1步-配置canary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第1步-配置canary"}},[t._v("#")]),t._v(" 第1步：配置Canary")]),t._v(" "),a("h3",{attrs:{id:"新建工程并构建目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建工程并构建目录"}},[t._v("#")]),t._v(" 新建工程并构建目录")]),t._v(" "),a("p",[t._v("首先，我们新建一个目录结构：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".\n├── run.py\n├── config.json\n└── Canary_SEFI\n")])])]),a("h3",{attrs:{id:"引入canary-library"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入canary-library"}},[t._v("#")]),t._v(" 引入Canary Library")]),t._v(" "),a("p",[a("strong",[t._v("👇请将该部分存放在"),a("code",[t._v("run.py")]),t._v("中👇")])]),t._v(" "),a("p",[t._v("我们首先引入必要依赖，并加载"),a("code",[t._v("Canary Library")]),t._v("模型和攻击方法至"),a("code",[t._v("Canary")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" random\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" numpy "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" np\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" canary_sefi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("multi_db_mode_enum "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MultiDatabaseMode\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" canary_sefi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("helper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("multi_db "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" use_multi_database\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" canary_sefi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("helper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("recovery "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" global_recovery\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" canary_sefi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("security_evaluation "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" SecurityEvaluation\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" canary_sefi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_manager "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" task_manager\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" canary_sefi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("component"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("component_manager "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" SEFI_component_manager\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 加载Canary Lib中的模型")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" canary_lib "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" canary_lib_model\nSEFI_component_manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canary_lib_model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 加载Canary Lib中的攻击方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" canary_lib "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" canary_lib_attacker\nSEFI_component_manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canary_lib_attacker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("接下来，我们构建配置：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("example_config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据集配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dataset_size"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于测试的图片数量")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dataset"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dataset_name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CIFAR10"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据集名称，此处是Torchvision定义的数据集会自动加载")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dataset_type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TEST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据集类型")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"n_classes"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据集类数量")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"is_gray"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据集是否是灰度图")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据集随机选取图片的种子")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dataset_seed"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" random"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Random"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模型配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"model_list"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ResNet(CIFAR-10)"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模型名，本例中模型名是 Canary Lib 中的模型 ResNet(CIFAR-10)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inference_batch_config"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模型预测的 Batch 数")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ResNet(CIFAR-10)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 攻击方法配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attacker_list"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I_FGSM"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 攻击方法名，本例中攻击方法名是 Canary Lib 中的攻击方法 I_FGSM")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ResNet(CIFAR-10)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 攻击方法攻击的目标模型")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attacker_config"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 攻击配置参数")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I_FGSM"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这是 Canary Lib 中的攻击方法 I_FGSM 推荐的攻击参数")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clip_min"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clip_max"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eps_iter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nb_iter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"norm"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attack_type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UNTARGETED"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"epsilon"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adv_example_generate_batch_config"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模型生成对抗样本的 Batch 数")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I_FGSM"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ResNet(CIFAR-10)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 转移测试模式：本例中我们只选择了一个模型，不存在转移测试，因此为NOT")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transfer_attack_test_mode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NOT"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"第2步-canary启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第2步-canary启动"}},[t._v("#")]),t._v(" 第2步：Canary启动")]),t._v(" "),a("p",[t._v("我们需要更改一下"),a("code",[t._v("Canary")]),t._v("的系统配置，并将以下内容存入 "),a("code",[t._v("config.json")]),t._v("（如果没有）。在本例中，我们只需要关注"),a("code",[t._v("datasetPath")]),t._v("和"),a("code",[t._v("baseTempPath")]),t._v("，它们分别是数据集路径和临时文件路径。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CANARY Test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appDesc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is an example program to start test using Canary SEFI"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"datasetPath"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/workplace/dataset/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"baseTempPath"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/workplace/temp/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"centerDatabasePath"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/workplace/temp/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"system"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"limited_read_img_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("900")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"use_file_memory_cache"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"save_fig_model"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"save_img_file"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("最后，我们使用该配置启动"),a("code",[t._v("Canary")]),t._v("运行评估测试：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化任务，使用显卡CUDA设备运行任务")]),t._v("\n    task_manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("init_task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("show_logo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" run_device"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cuda"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置当前模式为简单数据库模式（非高级用户请勿修改此设置）")]),t._v("\n    use_multi_database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("MultiDatabaseMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SIMPLE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用配置构建评估任务并启动")]),t._v("\n    security_evaluation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SecurityEvaluation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("example_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    security_evaluation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attack_full_test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"最后提示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后提示"}},[t._v("#")]),t._v(" 最后提示")]),t._v(" "),a("p",[t._v("恭喜，您刚刚使用"),a("code",[t._v("I-FGSM")]),t._v("对"),a("code",[t._v("ResNet(CIFAR-10)")]),t._v("模型进行了一次对抗攻击，并评估了该模型的鲁棒性与攻击方法的有效性。相较于上一章节，您会发现本章的教程如此简单，您既没有自行实现、集成、训练模型，也没有尝试复现攻击算法，但"),a("code",[t._v("Canary")]),t._v("依旧完成了和此前相同的工作。")]),t._v(" "),a("p",[a("code",[t._v("Canary Lib")]),t._v("就是这样一个库，旨在最大程度的减少您不必要的工作量。使得研究人员可以将目光集中在攻击算法的实现、模型鲁棒性的评估与增强上，而不必因为对照试验而心烦意乱。")])])}),[],!1,null,null,null);a.default=r.exports}}]);